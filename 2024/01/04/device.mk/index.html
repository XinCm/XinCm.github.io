<div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-01-04T07:53:59.712Z" title="1/4/2024, 3:53:59 PM">2024-01-04</time>发表</span><span class="level-item"><time dateTime="2024-01-04T07:53:59.712Z" title="1/4/2024, 3:53:59 PM">2024-01-04</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Android%E6%8A%80%E6%9C%AF/">Android技术</a></span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">android 下device.mk</h1><div class="content"><h3 id="device-mk在Android中用于定义特定设备或特定产品的编译、链接、打包"><a href="#device-mk在Android中用于定义特定设备或特定产品的编译、链接、打包" class="headerlink" title="device.mk在Android中用于定义特定设备或特定产品的编译、链接、打包"></a><code>device.mk</code>在Android中用于定义特定设备或特定产品的<code>编译、链接、打包</code></h3><span id="more"></span>
<p><strong>.mk和.bp文件语法不同，举例均为mk语法，bp均有替代语法</strong></p>
<p>常见使用方法：</p>
<h3 id="1-需要编译某一模块时，在device-mk或者-mk中添加："><a href="#1-需要编译某一模块时，在device-mk或者-mk中添加：" class="headerlink" title="1. 需要编译某一模块时，在device.mk或者&lt;product_name&gt;.mk中添加："></a>1. 需要编译某一模块时，在<code>device.mk</code>或者<code>&lt;product_name&gt;.mk</code>中添加：</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PRODUCT_PACKAGES += \</span><br><span class="line">    MyApp\</span><br></pre></td></tr></table></figure>

<h3 id="2-添加Android-propty："><a href="#2-添加Android-propty：" class="headerlink" title="2. 添加Android propty："></a>2. 添加Android propty：</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PRODUCT_PROPERTY_OVERRIDES += \</span><br><span class="line">    wifi.interface=wlan0 \</span><br></pre></td></tr></table></figure>

<h3 id="3-添加其他mk-bp文件："><a href="#3-添加其他mk-bp文件：" class="headerlink" title="3. 添加其他mk&#x2F;bp文件："></a>3. 添加其他mk&#x2F;bp文件：</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(call inherit-product, device/commom/xxx/new_add.mk)</span><br></pre></td></tr></table></figure>


<h3 id="4-拷贝文件"><a href="#4-拷贝文件" class="headerlink" title="4. 拷贝文件"></a>4. 拷贝文件</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PRODUCT_COPY_FILES += \</span><br><span class="line">    device/&lt;company-name&gt;/&lt;device-name&gt;/etc/permissions/privapp-permissions-R.xml:system_ext/etc/permissions/privapp-permissions-R.xml \</span><br></pre></td></tr></table></figure>


<h3 id="5-添加编译log"><a href="#5-添加编译log" class="headerlink" title="5. 添加编译log"></a>5. 添加编译log</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(warning <span class="string">&quot;[TEST] call here&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="6-使其他模块不编入系统："><a href="#6-使其他模块不编入系统：" class="headerlink" title="6. 使其他模块不编入系统："></a>6. 使其他模块不编入系统：</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LOCAL_OVERRIDES_PACKAGES := AlarmClock</span><br></pre></td></tr></table></figure>



<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://source.android.com/docs/setup/create/new-device?hl=zh-cn">https://source.android.com/docs/setup/create/new-device?hl=zh-cn</a></p>
<hr>
</div><div class="article-licensing box"><div class="licensing-title"><p>android 下device.mk</p><p><a href="http://example.com/2024/01/04/device.mk/">http://example.com/2024/01/04/device.mk/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>lx</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2024-01-04</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2024-01-04</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2024/01/03/HAL_Project_Treble/"><span class="level-item">Treble Hal</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content" id="valine-thread"></div><script src="//cdn.jsdelivr.net/npm/leancloud-storage@3/dist/av-min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/valine/1.4.16/Valine.min.js"></script><script>new Valine({
            el: '#valine-thread',
            appId: "dB8Dj4QSAc3XtpuM6sS4fCKR-gzGzoHsz",
            appKey: "xrxrySOXhneb2IHjGP1lHSx3",
            
            avatar: "mm",
            avatarForce: false,
            meta: ["nick","mail","link"],
            pageSize: 10,
            lang: "zh-CN",
            visitor: false,
            highlight: true,
            recordIP: false,
            
            
            
            enableQQ: false,
            requiredFields: [],
        });</script></div></div>