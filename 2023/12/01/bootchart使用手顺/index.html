<div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-12-01T06:02:04.070Z" title="12/1/2023, 2:02:04 PM">2023-12-01</time>发表</span><span class="level-item"><time dateTime="2023-12-01T06:02:04.070Z" title="12/1/2023, 2:02:04 PM">2023-12-01</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a></span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">BootChart使用手顺</h1><div class="content"><blockquote>
<p>BootChart是用于linux启动过程性能分析的开源软件工具，它可以在内核装载后就开始运行，记录各个程序启动占用的时间、CPU以及硬盘读写，直到系统启动完成为止。</p>
</blockquote>
<span id="more"></span>

<h2 id="STEP1"><a href="#STEP1" class="headerlink" title="STEP1"></a>STEP1</h2><p>kernel config中打开以下四个配置：</p>
<blockquote>
<p>CONFIG_PROC_FS&#x3D;y<br>CONFIG_SCHEDSTATS&#x3D;y<br>CONFIG_SCHED_DEBUG&#x3D;y<br>CONFIG_LATENCYTOP&#x3D;y</p>
</blockquote>
<h2 id="STEP2"><a href="#STEP2" class="headerlink" title="STEP2"></a>STEP2</h2><p>bootchart工程编译生成两个产物：</p>
<blockquote>
<p>bootchartd: 放在目录&#x2F;sbin下<br>bootchartd.conf :放在目录&#x2F;etc下</p>
</blockquote>
<h2 id="STEP3"><a href="#STEP3" class="headerlink" title="STEP3"></a>STEP3</h2><p>修改uboot cmdline中，init&#x3D;bootchartd</p>
<h2 id="STEP4"><a href="#STEP4" class="headerlink" title="STEP4"></a>STEP4</h2><p>重启机器，在&#x2F;var&#x2F;log 目录下生成 .svg 文件   </p>
<p><em>注意事项</em>:<br><em>1、若系统开启selinux,需要考虑权限问题，不确定是否有影响可以先关闭selinux查看svg文件是否正常生成</em></p>
<p><em>2、必须保证&#x2F;var目录有可写权限，一般嵌入式系统默认rootfs是ro,需修改其权限</em></p>
<p><em>3、若无法在系统命令行对cmdline修改，需要在step3中源码修改完cmdline后，单独烧录uboot。顺序必须为先将两个产物放入对应目录，再修改cmdline, 否则会导致init 查找不到&#x2F;sbin&#x2F;bootchard 导致crash</em></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>BootChart使用手顺</p><p><a href="http://example.com/2023/12/01/bootchart使用手顺/">http://example.com/2023/12/01/bootchart使用手顺/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>lx</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2023-12-01</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2023-12-01</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2023/12/04/LEETCODE-5.%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E4%B8%B2/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">LEETCODE 5. 最长回文子串</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2023/12/01/GDB%20%E5%B8%B8%E7%94%A8%E6%89%8B%E9%A1%BA/"><span class="level-item">GDB 常用手顺</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content" id="valine-thread"></div><script src="//cdn.jsdelivr.net/npm/leancloud-storage@3/dist/av-min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/valine/1.4.16/Valine.min.js"></script><script>new Valine({
            el: '#valine-thread',
            appId: "dB8Dj4QSAc3XtpuM6sS4fCKR-gzGzoHsz",
            appKey: "xrxrySOXhneb2IHjGP1lHSx3",
            
            avatar: "mm",
            avatarForce: false,
            meta: ["nick","mail","link"],
            pageSize: 10,
            lang: "zh-CN",
            visitor: false,
            highlight: true,
            recordIP: false,
            
            
            
            enableQQ: false,
            requiredFields: [],
        });</script></div></div>